{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nrequire('./index.css');\n\nvar _reactFlipMove = require('react-flip-move');\n\nvar _reactFlipMove2 = _interopRequireDefault(_reactFlipMove);\n\nvar _UploadIcon = require('./UploadIcon.svg');\n\nvar _UploadIcon2 = _interopRequireDefault(_UploadIcon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar styles = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  flexWrap: \"wrap\",\n  width: \"100%\"\n};\n\nvar ReactImageUploadComponent = function (_React$Component) {\n  _inherits(ReactImageUploadComponent, _React$Component);\n\n  function ReactImageUploadComponent(props) {\n    _classCallCheck(this, ReactImageUploadComponent);\n\n    var _this = _possibleConstructorReturn(this, (ReactImageUploadComponent.__proto__ || Object.getPrototypeOf(ReactImageUploadComponent)).call(this, props));\n\n    _this.state = {\n      pictures: [].concat(_toConsumableArray(props.defaultImages)),\n      files: [],\n      notAcceptedFileType: [],\n      notAcceptedFileSize: []\n    };\n    _this.inputElement = '';\n    _this.onDropFile = _this.onDropFile.bind(_this);\n    _this.onUploadClick = _this.onUploadClick.bind(_this);\n    _this.triggerFileUpload = _this.triggerFileUpload.bind(_this);\n    return _this;\n  }\n\n  _createClass(ReactImageUploadComponent, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      if (prevState.files !== this.state.files) {\n        this.props.onChange(this.state.files, this.state.pictures);\n      }\n    }\n    /*\n     Load image at the beggining if defaultImage prop exists\n     */\n\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.defaultImages !== this.props.defaultImages) {\n        this.setState({\n          pictures: nextProps.defaultImages\n        });\n      }\n    }\n    /*\n    Check file extension (onDropFile)\n    */\n\n  }, {\n    key: 'hasExtension',\n    value: function hasExtension(fileName) {\n      var pattern = '(' + this.props.imgExtension.join('|').replace(/\\./g, '\\\\.') + ')$';\n      return new RegExp(pattern, 'i').test(fileName);\n    }\n    /*\n     Handle file validation\n     */\n\n  }, {\n    key: 'onDropFile',\n    value: function onDropFile(e) {\n      var _this2 = this;\n\n      var files = e.target.files;\n      var allFilePromises = []; // Iterate over all uploaded files\n\n      for (var i = 0; i < files.length; i++) {\n        var f = files[i]; // Check for file extension\n\n        if (!this.hasExtension(f.name)) {\n          var newArray = this.state.notAcceptedFileType.slice();\n          newArray.push(f.name);\n          this.setState({\n            notAcceptedFileType: newArray\n          });\n          continue;\n        } // Check for file size\n\n\n        if (f.size > this.props.maxFileSize) {\n          var _newArray = this.state.notAcceptedFileSize.slice();\n\n          _newArray.push(f.name);\n\n          this.setState({\n            notAcceptedFileSize: _newArray\n          });\n          continue;\n        }\n\n        allFilePromises.push(this.readFile(f));\n      }\n\n      Promise.all(allFilePromises).then(function (newFilesData) {\n        var dataURLs = _this2.state.pictures.slice();\n\n        var files = _this2.state.files.slice();\n\n        newFilesData.forEach(function (newFileData) {\n          dataURLs.push(newFileData.dataURL);\n          files.push(newFileData.file);\n        });\n\n        _this2.setState({\n          pictures: dataURLs,\n          files: files\n        });\n      });\n    }\n  }, {\n    key: 'onUploadClick',\n    value: function onUploadClick(e) {\n      // Fixes https://github.com/JakeHartnell/react-images-upload/issues/55\n      e.target.value = null;\n    }\n    /*\n       Read a file and return a promise that when resolved gives the file itself and the data URL\n     */\n\n  }, {\n    key: 'readFile',\n    value: function readFile(file) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader(); // Read the image via FileReader API and save image result in state.\n\n        reader.onload = function (e) {\n          // Add the file name to the data URL\n          var dataURL = e.target.result;\n          dataURL = dataURL.replace(\";base64\", ';name=' + file.name + ';base64');\n          resolve({\n            file: file,\n            dataURL: dataURL\n          });\n        };\n\n        reader.readAsDataURL(file);\n      });\n    }\n    /*\n     Remove the image from state\n     */\n\n  }, {\n    key: 'removeImage',\n    value: function removeImage(picture) {\n      var _this3 = this;\n\n      var removeIndex = this.state.pictures.findIndex(function (e) {\n        return e === picture;\n      });\n      var filteredPictures = this.state.pictures.filter(function (e, index) {\n        return index !== removeIndex;\n      });\n      var filteredFiles = this.state.files.filter(function (e, index) {\n        return index !== removeIndex;\n      });\n      this.setState({\n        pictures: filteredPictures,\n        files: filteredFiles\n      }, function () {\n        _this3.props.onChange(_this3.state.files, _this3.state.pictures);\n      });\n    }\n    /*\n     Check if any errors && render\n     */\n\n  }, {\n    key: 'renderErrors',\n    value: function renderErrors() {\n      var _this4 = this;\n\n      var notAccepted = '';\n\n      if (this.state.notAcceptedFileType.length > 0) {\n        notAccepted = this.state.notAcceptedFileType.map(function (error, index) {\n          return _react2.default.createElement('div', {\n            className: 'errorMessage ' + _this4.props.errorClass,\n            key: index,\n            style: _this4.props.errorStyle\n          }, '* ', error, ' ', _this4.props.fileTypeError);\n        });\n      }\n\n      if (this.state.notAcceptedFileSize.length > 0) {\n        notAccepted = this.state.notAcceptedFileSize.map(function (error, index) {\n          return _react2.default.createElement('div', {\n            className: 'errorMessage ' + _this4.props.errorClass,\n            key: index,\n            style: _this4.props.errorStyle\n          }, '* ', error, ' ', _this4.props.fileSizeError);\n        });\n      }\n\n      return notAccepted;\n    }\n    /*\n     Render the upload icon\n     */\n\n  }, {\n    key: 'renderIcon',\n    value: function renderIcon() {\n      if (this.props.withIcon) {\n        return _react2.default.createElement('img', {\n          src: _UploadIcon2.default,\n          className: 'uploadIcon',\n          alt: 'Upload Icon'\n        });\n      }\n    }\n    /*\n     Render label\n     */\n\n  }, {\n    key: 'renderLabel',\n    value: function renderLabel() {\n      if (this.props.withLabel) {\n        return _react2.default.createElement('p', {\n          className: this.props.labelClass,\n          style: this.props.labelStyles\n        }, this.props.label);\n      }\n    }\n    /*\n     Render preview images\n     */\n\n  }, {\n    key: 'renderPreview',\n    value: function renderPreview() {\n      return _react2.default.createElement('div', {\n        className: 'uploadPicturesWrapper'\n      }, _react2.default.createElement(_reactFlipMove2.default, {\n        enterAnimation: 'fade',\n        leaveAnimation: 'fade',\n        style: styles\n      }, this.renderPreviewPictures()));\n    }\n  }, {\n    key: 'renderPreviewPictures',\n    value: function renderPreviewPictures() {\n      var _this5 = this;\n\n      return this.state.pictures.map(function (picture, index) {\n        return _react2.default.createElement('div', {\n          key: index,\n          className: 'uploadPictureContainer'\n        }, _react2.default.createElement('div', {\n          className: 'deleteImage',\n          onClick: function onClick() {\n            return _this5.removeImage(picture);\n          }\n        }, 'X'), _react2.default.createElement('img', {\n          src: picture,\n          className: 'uploadPicture',\n          alt: 'preview'\n        }));\n      });\n    }\n    /*\n     On button click, trigger input file to open\n     */\n\n  }, {\n    key: 'triggerFileUpload',\n    value: function triggerFileUpload() {\n      this.inputElement.click();\n    }\n  }, {\n    key: 'clearPictures',\n    value: function clearPictures() {\n      this.setState({\n        pictures: []\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this6 = this;\n\n      return _react2.default.createElement('div', {\n        className: \"fileUploader \" + this.props.className,\n        style: this.props.style\n      }, _react2.default.createElement('div', {\n        className: 'fileContainer',\n        style: this.props.fileContainerStyle\n      }, this.renderIcon(), this.renderLabel(), _react2.default.createElement('div', {\n        className: 'errorsContainer'\n      }, this.renderErrors()), _react2.default.createElement('button', {\n        type: this.props.buttonType,\n        className: \"chooseFileButton \" + this.props.buttonClassName,\n        style: this.props.buttonStyles,\n        onClick: this.triggerFileUpload\n      }, this.props.buttonText), _react2.default.createElement('input', {\n        type: 'file',\n        ref: function ref(input) {\n          return _this6.inputElement = input;\n        },\n        name: this.props.name,\n        multiple: !this.props.singleImage,\n        onChange: this.onDropFile,\n        onClick: this.onUploadClick,\n        accept: this.props.accept\n      }), this.props.withPreview ? this.renderPreview() : null));\n    }\n  }]);\n\n  return ReactImageUploadComponent;\n}(_react2.default.Component);\n\nReactImageUploadComponent.defaultProps = {\n  className: '',\n  fileContainerStyle: {},\n  buttonClassName: \"\",\n  buttonStyles: {},\n  withPreview: false,\n  accept: \"image/*\",\n  name: \"\",\n  withIcon: true,\n  buttonText: \"Choose images\",\n  buttonType: \"button\",\n  withLabel: true,\n  label: \"Max file size: 5mb, accepted: jpg|gif|png\",\n  labelStyles: {},\n  labelClass: \"\",\n  imgExtension: ['.jpg', '.jpeg', '.gif', '.png'],\n  maxFileSize: 5242880,\n  fileSizeError: \" file size is too big\",\n  fileTypeError: \" is not a supported file extension\",\n  errorClass: \"\",\n  style: {},\n  errorStyle: {},\n  singleImage: false,\n  onChange: function onChange() {},\n  defaultImages: []\n};\nReactImageUploadComponent.propTypes = {\n  style: _propTypes2.default.object,\n  fileContainerStyle: _propTypes2.default.object,\n  className: _propTypes2.default.string,\n  onChange: _propTypes2.default.func,\n  onDelete: _propTypes2.default.func,\n  buttonClassName: _propTypes2.default.string,\n  buttonStyles: _propTypes2.default.object,\n  buttonType: _propTypes2.default.string,\n  withPreview: _propTypes2.default.bool,\n  accept: _propTypes2.default.string,\n  name: _propTypes2.default.string,\n  withIcon: _propTypes2.default.bool,\n  buttonText: _propTypes2.default.string,\n  withLabel: _propTypes2.default.bool,\n  label: _propTypes2.default.string,\n  labelStyles: _propTypes2.default.object,\n  labelClass: _propTypes2.default.string,\n  imgExtension: _propTypes2.default.array,\n  maxFileSize: _propTypes2.default.number,\n  fileSizeError: _propTypes2.default.string,\n  fileTypeError: _propTypes2.default.string,\n  errorClass: _propTypes2.default.string,\n  errorStyle: _propTypes2.default.object,\n  singleImage: _propTypes2.default.bool,\n  defaultImages: _propTypes2.default.array\n};\nexports.default = ReactImageUploadComponent;","map":{"version":3,"sources":["/home/heroo/myfirstreact/client/node_modules/react-images-upload/compiled.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactFlipMove","_reactFlipMove2","_UploadIcon","_UploadIcon2","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","styles","display","alignItems","justifyContent","flexWrap","width","ReactImageUploadComponent","_React$Component","_this","getPrototypeOf","state","pictures","concat","defaultImages","files","notAcceptedFileType","notAcceptedFileSize","inputElement","onDropFile","bind","onUploadClick","triggerFileUpload","componentDidUpdate","prevProps","prevState","snapshot","onChange","componentWillReceiveProps","nextProps","setState","hasExtension","fileName","pattern","imgExtension","join","replace","RegExp","test","e","_this2","allFilePromises","f","name","newArray","slice","push","size","maxFileSize","_newArray","readFile","Promise","all","then","newFilesData","dataURLs","forEach","newFileData","dataURL","file","resolve","reject","reader","FileReader","onload","result","readAsDataURL","removeImage","picture","_this3","removeIndex","findIndex","filteredPictures","filter","index","filteredFiles","renderErrors","_this4","notAccepted","map","error","createElement","className","errorClass","style","errorStyle","fileTypeError","fileSizeError","renderIcon","withIcon","src","alt","renderLabel","withLabel","labelClass","labelStyles","label","renderPreview","enterAnimation","leaveAnimation","renderPreviewPictures","_this5","onClick","click","clearPictures","render","_this6","fileContainerStyle","type","buttonType","buttonClassName","buttonStyles","buttonText","ref","input","multiple","singleImage","accept","withPreview","Component","defaultProps","propTypes","object","string","func","onDelete","bool","array","number"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nrequire('./index.css');\n\nvar _reactFlipMove = require('react-flip-move');\n\nvar _reactFlipMove2 = _interopRequireDefault(_reactFlipMove);\n\nvar _UploadIcon = require('./UploadIcon.svg');\n\nvar _UploadIcon2 = _interopRequireDefault(_UploadIcon);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar styles = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  flexWrap: \"wrap\",\n  width: \"100%\"\n};\n\nvar ReactImageUploadComponent = function (_React$Component) {\n  _inherits(ReactImageUploadComponent, _React$Component);\n\n  function ReactImageUploadComponent(props) {\n    _classCallCheck(this, ReactImageUploadComponent);\n\n    var _this = _possibleConstructorReturn(this, (ReactImageUploadComponent.__proto__ || Object.getPrototypeOf(ReactImageUploadComponent)).call(this, props));\n\n    _this.state = {\n      pictures: [].concat(_toConsumableArray(props.defaultImages)),\n      files: [],\n      notAcceptedFileType: [],\n      notAcceptedFileSize: []\n    };\n    _this.inputElement = '';\n    _this.onDropFile = _this.onDropFile.bind(_this);\n    _this.onUploadClick = _this.onUploadClick.bind(_this);\n    _this.triggerFileUpload = _this.triggerFileUpload.bind(_this);\n    return _this;\n  }\n\n  _createClass(ReactImageUploadComponent, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      if (prevState.files !== this.state.files) {\n        this.props.onChange(this.state.files, this.state.pictures);\n      }\n    }\n\n    /*\n     Load image at the beggining if defaultImage prop exists\n     */\n\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.defaultImages !== this.props.defaultImages) {\n        this.setState({ pictures: nextProps.defaultImages });\n      }\n    }\n\n    /*\n    Check file extension (onDropFile)\n    */\n\n  }, {\n    key: 'hasExtension',\n    value: function hasExtension(fileName) {\n      var pattern = '(' + this.props.imgExtension.join('|').replace(/\\./g, '\\\\.') + ')$';\n      return new RegExp(pattern, 'i').test(fileName);\n    }\n\n    /*\n     Handle file validation\n     */\n\n  }, {\n    key: 'onDropFile',\n    value: function onDropFile(e) {\n      var _this2 = this;\n\n      var files = e.target.files;\n      var allFilePromises = [];\n\n      // Iterate over all uploaded files\n      for (var i = 0; i < files.length; i++) {\n        var f = files[i];\n        // Check for file extension\n        if (!this.hasExtension(f.name)) {\n          var newArray = this.state.notAcceptedFileType.slice();\n          newArray.push(f.name);\n          this.setState({ notAcceptedFileType: newArray });\n          continue;\n        }\n        // Check for file size\n        if (f.size > this.props.maxFileSize) {\n          var _newArray = this.state.notAcceptedFileSize.slice();\n          _newArray.push(f.name);\n          this.setState({ notAcceptedFileSize: _newArray });\n          continue;\n        }\n\n        allFilePromises.push(this.readFile(f));\n      }\n\n      Promise.all(allFilePromises).then(function (newFilesData) {\n        var dataURLs = _this2.state.pictures.slice();\n        var files = _this2.state.files.slice();\n\n        newFilesData.forEach(function (newFileData) {\n          dataURLs.push(newFileData.dataURL);\n          files.push(newFileData.file);\n        });\n\n        _this2.setState({ pictures: dataURLs, files: files });\n      });\n    }\n  }, {\n    key: 'onUploadClick',\n    value: function onUploadClick(e) {\n      // Fixes https://github.com/JakeHartnell/react-images-upload/issues/55\n      e.target.value = null;\n    }\n\n    /*\n       Read a file and return a promise that when resolved gives the file itself and the data URL\n     */\n\n  }, {\n    key: 'readFile',\n    value: function readFile(file) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n\n        // Read the image via FileReader API and save image result in state.\n        reader.onload = function (e) {\n          // Add the file name to the data URL\n          var dataURL = e.target.result;\n          dataURL = dataURL.replace(\";base64\", ';name=' + file.name + ';base64');\n          resolve({ file: file, dataURL: dataURL });\n        };\n\n        reader.readAsDataURL(file);\n      });\n    }\n\n    /*\n     Remove the image from state\n     */\n\n  }, {\n    key: 'removeImage',\n    value: function removeImage(picture) {\n      var _this3 = this;\n\n      var removeIndex = this.state.pictures.findIndex(function (e) {\n        return e === picture;\n      });\n      var filteredPictures = this.state.pictures.filter(function (e, index) {\n        return index !== removeIndex;\n      });\n      var filteredFiles = this.state.files.filter(function (e, index) {\n        return index !== removeIndex;\n      });\n\n      this.setState({ pictures: filteredPictures, files: filteredFiles }, function () {\n        _this3.props.onChange(_this3.state.files, _this3.state.pictures);\n      });\n    }\n\n    /*\n     Check if any errors && render\n     */\n\n  }, {\n    key: 'renderErrors',\n    value: function renderErrors() {\n      var _this4 = this;\n\n      var notAccepted = '';\n      if (this.state.notAcceptedFileType.length > 0) {\n        notAccepted = this.state.notAcceptedFileType.map(function (error, index) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'errorMessage ' + _this4.props.errorClass, key: index, style: _this4.props.errorStyle },\n            '* ',\n            error,\n            ' ',\n            _this4.props.fileTypeError\n          );\n        });\n      }\n      if (this.state.notAcceptedFileSize.length > 0) {\n        notAccepted = this.state.notAcceptedFileSize.map(function (error, index) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'errorMessage ' + _this4.props.errorClass, key: index, style: _this4.props.errorStyle },\n            '* ',\n            error,\n            ' ',\n            _this4.props.fileSizeError\n          );\n        });\n      }\n      return notAccepted;\n    }\n\n    /*\n     Render the upload icon\n     */\n\n  }, {\n    key: 'renderIcon',\n    value: function renderIcon() {\n      if (this.props.withIcon) {\n        return _react2.default.createElement('img', { src: _UploadIcon2.default, className: 'uploadIcon', alt: 'Upload Icon' });\n      }\n    }\n\n    /*\n     Render label\n     */\n\n  }, {\n    key: 'renderLabel',\n    value: function renderLabel() {\n      if (this.props.withLabel) {\n        return _react2.default.createElement(\n          'p',\n          { className: this.props.labelClass, style: this.props.labelStyles },\n          this.props.label\n        );\n      }\n    }\n\n    /*\n     Render preview images\n     */\n\n  }, {\n    key: 'renderPreview',\n    value: function renderPreview() {\n      return _react2.default.createElement(\n        'div',\n        { className: 'uploadPicturesWrapper' },\n        _react2.default.createElement(\n          _reactFlipMove2.default,\n          { enterAnimation: 'fade', leaveAnimation: 'fade', style: styles },\n          this.renderPreviewPictures()\n        )\n      );\n    }\n  }, {\n    key: 'renderPreviewPictures',\n    value: function renderPreviewPictures() {\n      var _this5 = this;\n\n      return this.state.pictures.map(function (picture, index) {\n        return _react2.default.createElement(\n          'div',\n          { key: index, className: 'uploadPictureContainer' },\n          _react2.default.createElement(\n            'div',\n            { className: 'deleteImage', onClick: function onClick() {\n                return _this5.removeImage(picture);\n              } },\n            'X'\n          ),\n          _react2.default.createElement('img', { src: picture, className: 'uploadPicture', alt: 'preview' })\n        );\n      });\n    }\n\n    /*\n     On button click, trigger input file to open\n     */\n\n  }, {\n    key: 'triggerFileUpload',\n    value: function triggerFileUpload() {\n      this.inputElement.click();\n    }\n  }, {\n    key: 'clearPictures',\n    value: function clearPictures() {\n      this.setState({ pictures: [] });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this6 = this;\n\n      return _react2.default.createElement(\n        'div',\n        { className: \"fileUploader \" + this.props.className, style: this.props.style },\n        _react2.default.createElement(\n          'div',\n          { className: 'fileContainer', style: this.props.fileContainerStyle },\n          this.renderIcon(),\n          this.renderLabel(),\n          _react2.default.createElement(\n            'div',\n            { className: 'errorsContainer' },\n            this.renderErrors()\n          ),\n          _react2.default.createElement(\n            'button',\n            {\n              type: this.props.buttonType,\n              className: \"chooseFileButton \" + this.props.buttonClassName,\n              style: this.props.buttonStyles,\n              onClick: this.triggerFileUpload\n            },\n            this.props.buttonText\n          ),\n          _react2.default.createElement('input', {\n            type: 'file',\n            ref: function ref(input) {\n              return _this6.inputElement = input;\n            },\n            name: this.props.name,\n            multiple: !this.props.singleImage,\n            onChange: this.onDropFile,\n            onClick: this.onUploadClick,\n            accept: this.props.accept\n          }),\n          this.props.withPreview ? this.renderPreview() : null\n        )\n      );\n    }\n  }]);\n\n  return ReactImageUploadComponent;\n}(_react2.default.Component);\n\nReactImageUploadComponent.defaultProps = {\n  className: '',\n  fileContainerStyle: {},\n  buttonClassName: \"\",\n  buttonStyles: {},\n  withPreview: false,\n  accept: \"image/*\",\n  name: \"\",\n  withIcon: true,\n  buttonText: \"Choose images\",\n  buttonType: \"button\",\n  withLabel: true,\n  label: \"Max file size: 5mb, accepted: jpg|gif|png\",\n  labelStyles: {},\n  labelClass: \"\",\n  imgExtension: ['.jpg', '.jpeg', '.gif', '.png'],\n  maxFileSize: 5242880,\n  fileSizeError: \" file size is too big\",\n  fileTypeError: \" is not a supported file extension\",\n  errorClass: \"\",\n  style: {},\n  errorStyle: {},\n  singleImage: false,\n  onChange: function onChange() {},\n  defaultImages: []\n};\n\nReactImageUploadComponent.propTypes = {\n  style: _propTypes2.default.object,\n  fileContainerStyle: _propTypes2.default.object,\n  className: _propTypes2.default.string,\n  onChange: _propTypes2.default.func,\n  onDelete: _propTypes2.default.func,\n  buttonClassName: _propTypes2.default.string,\n  buttonStyles: _propTypes2.default.object,\n  buttonType: _propTypes2.default.string,\n  withPreview: _propTypes2.default.bool,\n  accept: _propTypes2.default.string,\n  name: _propTypes2.default.string,\n  withIcon: _propTypes2.default.bool,\n  buttonText: _propTypes2.default.string,\n  withLabel: _propTypes2.default.bool,\n  label: _propTypes2.default.string,\n  labelStyles: _propTypes2.default.object,\n  labelClass: _propTypes2.default.string,\n  imgExtension: _propTypes2.default.array,\n  maxFileSize: _propTypes2.default.number,\n  fileSizeError: _propTypes2.default.string,\n  fileTypeError: _propTypes2.default.string,\n  errorClass: _propTypes2.default.string,\n  errorStyle: _propTypes2.default.object,\n  singleImage: _propTypes2.default.bool,\n  defaultImages: _propTypes2.default.array\n};\n\nexports.default = ReactImageUploadComponent;\n"]},"metadata":{},"sourceType":"script"}